<?php
// eml_config_form.install

function eml_config_form_install() {
  switch ($GLOBALS['db_type']) {
    case 'mysql':
    case 'mysqli':
      // the {tablename} syntax is so multisite installs can add a
      // prefix to the table name as set in the settings.php file
      db_query("
        CREATE TABLE IF NOT EXISTS {node_field_eml_config_form_data} (
          vid int(10) unsigned NOT NULL DEFAULT '0',
          nid int(10) unsigned NOT NULL DEFAULT '0',
          field_acronim_value varchar(3) DEFAULT NULL,
          field_language_value longtext,
          field_intellectual_rights_value longtext,
          field_data_policies_value longtext,
          PRIMARY KEY (vid),
          KEY nid (nid)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8;      
        /*!40100 DEFAULT CHARACTER SET utf8 */;");
      break;

    case 'pgsql':
      db_query("CREATE TABLE {node_field_eml_config_form_data} (
          vid serial CHECK (vid >= 0),
          field_name varchar(32) NOT NULL default '',
          delta integer NOT NULL default '0' CHECK (delta >= 0),
          field_nid integer NOT NULL default '0' CHECK (field_nid >= 0),
          PRIMARY KEY  (vid, field_name, delta)
        )");

      // Pgsql requires keys and indexes to be defined separately.
      // It's important to name the index as {tablename}_fieldname_idx
      // (the trailing _idx!) so update scripts can be written easily
      db_query("CREATE INDEX {node_field_eml_config_form_data}_field_name_idx
                ON {node_field_eml_config_form_data} (field_name)");
      break;
  }
}
?>